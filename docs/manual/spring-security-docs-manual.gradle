apply plugin: 'io.spring.convention.docs'

asciidoctor {
	def ghTag = snapshotBuild ? 'master' : project.version
	def ghUrl = "https://github.com/spring-projects/spring-security/tree/$ghTag"
	attributes 'spring-security-version' : project.version,
		'spring-version' : project(':spring-security-core').dependencyManagement.managedVersions['org.springframework:spring-core'],
		'spring-boot-version' : springBootVersion,
		revnumber : project.version,
		'gh-url': ghUrl,
		'gh-samples-url': "$ghUrl/samples"
}

remotes {
	docs {
		retryCount = 5 // retry 5 times (default is 0)
		retryWaitSec = 10 // wait 10 seconds between retries (default is 0)
	}
}

docsZip {
	from(project(':spring-security-docs-guides').asciidoctor) {
		into 'guides'
	}
}
